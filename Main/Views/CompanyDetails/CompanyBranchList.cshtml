@inherits Crm.Library.Modularization.CrmViewUserControl<dynamic>
@using Crm.Library.Globalization.Extensions

<div class="pmb-block companybranches">
	<div class="pmbb-header">
		<h2>
			<i class="zmdi zmdi-city-alt m-r-5"></i>
			<span data-bind="translatedText: 'CompanyBranches'"></span>
		</h2>
		<!-- ko requiredPermission: { name: 'Edit', group: 'Branch' } -->
		<ul class="actions">
			<li class="dropdown">
				<a id="company-branch-add" href="#" data-bind="attr: { 'data-route': 'Main/CompanyBranch/EditTemplate/' }, tooltip: true" data-toggle="modal" data-target="#lgModal" title="@(Html.Localize("Add"))"><i class="zmdi zmdi-plus-circle"></i></a>
			</li>
		</ul>
		<!-- /ko -->
	</div>
	<div class="pmbb-body p-l-30">
		<!-- ko foreach: displayCompanyBranches -->
		@await Html.PartialAsync("CompanyBranchEntry")
		<hr data-bind="visible: $index() + 1 !==  $root.displayCompanyBranches().length"/>
		<!-- /ko -->
		<span data-bind="translatedText: 'NoBranches', visible: $root.company().CompanyBranches().length === 0"></span>
	</div>
</div>
<span class="lv-footer" href="#" data-bind=" click: $root.toggleCompanyBranches, visible: $root.company().CompanyBranches().length > 1">
	<i data-bind="css: $root.toggleIcon()"></i>
	<span data-bind="translatedText: $root.showCompanyBranches() === true ? 'ShowAll' : 'ShowLess'"></span>
</span>

